defmodule AOC2022.CathoderayTubeTest do
  use ExUnit.Case

  alias AOC2022.Input
  alias AOC2022.CathoderayTube

  test "calculates the sum of the signal at certain cycles" do
    input = Input.read("cathoderay_tube.txt")

    assert CathoderayTube.solve(input, &CathoderayTube.get_signal_strengths/1) == 11_960
  end

  test "gets the drawings done on the sceen" do
    input = Input.read("cathoderay_tube.txt")

    assert [
             [
               "#",
               "#",
               "#",
               "#",
               ".",
               ".",
               ".",
               "#",
               "#",
               ".",
               ".",
               "#",
               "#",
               ".",
               ".",
               "#",
               "#",
               "#",
               "#",
               ".",
               "#",
               "#",
               "#",
               ".",
               ".",
               ".",
               "#",
               "#",
               ".",
               ".",
               "#",
               ".",
               ".",
               ".",
               ".",
               "#",
               ".",
               ".",
               "#",
               "."
             ],
             [
               "#",
               ".",
               ".",
               ".",
               ".",
               ".",
               ".",
               ".",
               "#",
               ".",
               "#",
               ".",
               ".",
               "#",
               ".",
               "#",
               ".",
               ".",
               ".",
               ".",
               "#",
               ".",
               ".",
               "#",
               ".",
               "#",
               ".",
               ".",
               "#",
               ".",
               "#",
               ".",
               ".",
               ".",
               ".",
               "#",
               ".",
               ".",
               "#",
               "."
             ],
             [
               "#",
               "#",
               "#",
               ".",
               ".",
               ".",
               ".",
               ".",
               "#",
               ".",
               "#",
               ".",
               ".",
               ".",
               ".",
               "#",
               "#",
               "#",
               ".",
               ".",
               "#",
               ".",
               ".",
               "#",
               ".",
               "#",
               ".",
               ".",
               ".",
               ".",
               "#",
               ".",
               ".",
               ".",
               ".",
               "#",
               "#",
               "#",
               "#",
               "."
             ],
             [
               "#",
               ".",
               ".",
               ".",
               ".",
               ".",
               ".",
               ".",
               "#",
               ".",
               "#",
               ".",
               ".",
               ".",
               ".",
               "#",
               ".",
               ".",
               ".",
               ".",
               "#",
               "#",
               "#",
               ".",
               ".",
               "#",
               ".",
               "#",
               "#",
               ".",
               "#",
               ".",
               ".",
               ".",
               ".",
               "#",
               ".",
               ".",
               "#",
               "."
             ],
             [
               "#",
               ".",
               ".",
               ".",
               ".",
               "#",
               ".",
               ".",
               "#",
               ".",
               "#",
               ".",
               ".",
               "#",
               ".",
               "#",
               ".",
               ".",
               ".",
               ".",
               "#",
               ".",
               ".",
               ".",
               ".",
               "#",
               ".",
               ".",
               "#",
               ".",
               "#",
               ".",
               ".",
               ".",
               ".",
               "#",
               ".",
               ".",
               "#",
               "."
             ],
             [
               "#",
               "#",
               "#",
               "#",
               ".",
               ".",
               "#",
               "#",
               ".",
               ".",
               ".",
               "#",
               "#",
               ".",
               ".",
               "#",
               ".",
               ".",
               ".",
               ".",
               "#",
               ".",
               ".",
               ".",
               ".",
               ".",
               "#",
               "#",
               "#",
               ".",
               "#",
               "#",
               "#",
               "#",
               ".",
               "#",
               ".",
               ".",
               "#",
               "."
             ]
           ] = CathoderayTube.solve(input, &CathoderayTube.draw_pixels/1)
  end
end
